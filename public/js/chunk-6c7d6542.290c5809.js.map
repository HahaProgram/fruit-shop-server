{"version":3,"sources":["webpack:///./src/components/toPay.vue?e794","webpack:///src/components/toPay.vue","webpack:///./src/components/toPay.vue?8a0a","webpack:///./src/components/toPay.vue","webpack:///./src/components/toPay.vue?1976"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","selectAddress","address","id","_v","_s","receiver","phone","_l","item","key","attrs","image","goodsName","goodsDes","goodsPrice","goodsNum","money","sendMoney","_e","_m","totalMoney","toPay","staticRenderFns","mounted","deceleration","beforeDestroy","created","computed","buyList","methods","password","res","order","r","orderF","resolve","console","goodsList","result","setTimeout","num","document","path","query","isTo","component"],"mappings":"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","file":"js/chunk-6c7d6542.290c5809.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mui-content\"},[_c('div',{staticClass:\"mui-scroll-wrapper\"},[_c('div',{staticClass:\"mui-scroll\"},[_c('div',{staticClass:\"address\",on:{\"click\":_vm.selectAddress}},[(!_vm.address.id)?_c('div',{staticClass:\"noAddress\"},[_c('span',{staticClass:\"fa fa-edit\"}),_c('span',[_vm._v(\"请填写收货地址\")])]):_c('div',[_c('div',{staticClass:\"address-detail\"},[_c('span',{staticClass:\"fa fa-paper-plane-o\"}),_c('span',[_vm._v(_vm._s(_vm.address.address))])]),_c('div',{staticClass:\"receiver\"},[_c('span',[_vm._v(_vm._s(_vm.address.receiver))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.address.phone))])])]),_c('div',{staticClass:\"gt\"},[_vm._v(\">\")])]),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"jsd\"},[_vm._v(\"极速达\")]),_c('div',{staticClass:\"goods-list\"},[_c('div',_vm._l((_vm.buyList),function(item){return _c('div',{key:item.id,staticClass:\"goods-item\"},[_c('div',{staticClass:\"goods-item-left\"},[_c('img',{attrs:{\"src\":item.image,\"alt\":\"\"}})]),_c('div',{staticClass:\"goods-item-right\"},[_c('div',[_vm._v(_vm._s(item.goodsName))]),_c('div',[_vm._v(_vm._s(item.goodsDes))]),_c('div',[_vm._v(\" 价格: \"),_c('span',[_vm._v(\"¥ \"+_vm._s(item.goodsPrice))]),_vm._v(\" x \"),_c('span',[_vm._v(_vm._s(item.goodsNum))])]),_c('div',[_vm._v(\" 小计: \"),_c('span',[_vm._v(\"¥ \"+_vm._s(item.goodsPrice * item.goodsNum))])])])])}),0),_c('div',{staticClass:\"pay-message\"},[_c('div',[_c('span',[_vm._v(\"商品金额\")]),_c('span',[_vm._v(\"¥ \"+_vm._s(_vm.money))])]),_c('div',[_c('span',[_vm._v(\" 基础配送费 \"),(_vm.sendMoney === 8)?_c('span',{staticClass:\"tips\"},[_c('span',{staticClass:\"fa fa-info\"}),_vm._v(\" 满88元，免配送费哦 \")]):_vm._e()]),_c('span',[_vm._v(\"¥ \"+_vm._s(_vm.sendMoney))])]),_vm._m(0)]),_c('div',{staticClass:\"pay-bottom\"}),_c('div',{staticClass:\"total-money\"},[_c('div',[_vm._v(\" 小计：¥ \"),_c('span',[_vm._v(_vm._s(_vm.totalMoney))])])])])])])]),_c('div',{staticClass:\"to-pay\"},[_c('div',{staticClass:\"to-pay-content\"},[_c('div',[_vm._v(\" 待支付: \"),_c('span',[_vm._v(\"¥ \"+_vm._s(_vm.totalMoney))])]),_c('div',{on:{\"click\":_vm.toPay}},[_vm._v(\"去支付\")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('span',[_vm._v(\"订单备注\")]),_c('span',[_c('input',{staticClass:\"goods-input\",attrs:{\"placeholder\":\"订单备注\",\"type\":\"text\"}})])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"mui-content\">\n    <div class=\"mui-scroll-wrapper\">\n      <div class=\"mui-scroll\">\n        <div class=\"address\" @click=\"selectAddress\">\n          <div class=\"noAddress\" v-if=\"!address.id\">\n            <span class=\"fa fa-edit\"></span>\n            <span>请填写收货地址</span>\n          </div>\n          <div v-else>\n            <div class=\"address-detail\">\n              <span class=\"fa fa-paper-plane-o\"></span>\n              <span>{{address.address}}</span>\n            </div>\n            <div class=\"receiver\">\n              <span>{{address.receiver}}</span>&nbsp;&nbsp;&nbsp;&nbsp;\n              <span>{{address.phone}}</span>\n            </div>\n          </div>\n          <div class=\"gt\">&gt;</div>\n        </div>\n        <div class=\"content\">\n          <div class=\"jsd\">极速达</div>\n          <div class=\"goods-list\">\n            <div>\n              <div class=\"goods-item\" v-for=\"item in buyList\" :key=\"item.id\">\n                <div class=\"goods-item-left\">\n                  <img :src=\"item.image\" alt />\n                </div>\n                <div class=\"goods-item-right\">\n                  <div>{{item.goodsName}}</div>\n                  <div>{{item.goodsDes}}</div>\n                  <div>\n                    价格:&nbsp;\n                    <span>¥&nbsp;{{item.goodsPrice}}</span> x\n                    <span>{{item.goodsNum}}</span>\n                  </div>\n                  <div>\n                    小计:\n                    <span>¥&nbsp;{{item.goodsPrice * item.goodsNum}}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"pay-message\">\n              <div>\n                <span>商品金额</span>\n                <span>¥&nbsp;{{money}}</span>\n              </div>\n              <div>\n                <span>\n                  基础配送费\n                  <span class=\"tips\" v-if=\"sendMoney === 8\">\n                    <span class=\"fa fa-info\"></span>\n                    满88元，免配送费哦\n                  </span>\n                </span>\n\n                <span>¥&nbsp;{{sendMoney}}</span>\n              </div>\n              <div>\n                <span>订单备注</span>\n                <span>\n                  <input class=\"goods-input\" placeholder=\"订单备注\" type=\"text\" />\n                </span>\n              </div>\n            </div>\n            <div class=\"pay-bottom\"></div>\n            <div class=\"total-money\">\n              <div>\n                小计：¥&nbsp;\n                <span>{{ totalMoney }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"to-pay\">\n      <div class=\"to-pay-content\">\n        <div>\n          待支付:\n          <span>¥&nbsp;{{totalMoney}}</span>\n        </div>\n        <div @click=\"toPay\">去支付</div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n\nexport default {\n    \n  mounted() {\n    this.$store.commit('modifyFlag', true)\n    this.mui(\".mui-scroll-wrapper\").scroll({\n      deceleration: 0.0005\n    });\n  },\n  beforeDestroy () {\n    this.$store.commit('modifyFlag', false)\n  },\n  created() {\n    this.$store.commit(\"modifyTitle\", \"订单填写\");\n  },\n  computed: {\n    buyList() {\n      return this.$store.state.buyList;\n    },\n    money() {\n      let money = 0;\n      this.$store.state.buyList.forEach(item => {\n        money = money + item.goodsPrice * item.goodsNum;\n      });\n      return money;\n    },\n    sendMoney() {\n      let money = 0;\n      this.$store.state.buyList.forEach(item => {\n        money = money + item.goodsPrice * item.goodsNum;\n      });\n      return money > 88 ? 0 : 8;\n    },\n    totalMoney() {\n      let money = 0;\n      this.$store.state.buyList.forEach(item => {\n        money = money + item.goodsPrice * item.goodsNum;\n      });\n      let sendMoney = 0;\n      money > 88 ? (sendMoney = 0) : (sendMoney = 8);\n      return money + sendMoney;\n    },\n    address() {\n      return this.$store.state.selectAddress;\n    }\n  },\n  methods: {\n    async toPay() {\n      let password = \"\";\n      this.mui.prompt(\n        \"正在支付中···\",\n        \"请输入支付密码\",\n        \"提示\",\n        [\"取消\", \"支付\"],\n        async res => {\n            if (res.index === 0) return;\n\n            password = res.value;\n\n            let order = this.$store.state.buyList;\n            let address = this.$store.state.selectAddress;\n            if (!address.address) {\n                this.mui.toast(\"请选择地址\");\n                return;\n            }\n            let r = false\n            const orderF = ()=>{\n              return new Promise((resolve, reject)=>{\n                order.forEach(item=>{\n                  if(item.goodsNum > item.stock && r === false){\n                    this.mui.alert(`商品：${item.goodsName} 库存不足`)\n                    r = true\n                    resolve(true)\n                  }else{\n                    resolve(false)\n                  }\n                })\n              })\n            }\n            r = await orderF()\n            if(r){\n              return\n            }\n            console.log('rrrrrrrrrrrrrr'+r)\n            let result = await this.$http.post(\"addOrder\", {\n                goodsList: order,\n                address: address,\n                totalMoney: this.totalMoney,\n                password: password\n            });\n            console.log(result.data);\n            this.mui.toast(result.data.msg);\n            if (result.data.code === 0) {\n                 this.$store.commit(\"modifyBuList\", []);\n                setTimeout(() => {\n                    this.$router.push(\"/orders\");\n                }, 2000);\n\n                let num = 0;\n                order.forEach(item => {\n                    num = num + item.goodsNum;\n                });\n                this.$store.commit(\n                    \"modifyCartNum\",\n                    this.$store.state.shoppingCartNum - num\n                );\n            }\n        }, 'div'\n      );\n        document.querySelector('.mui-popup-input input').type='password' \n      \n    },\n    selectAddress() {\n      this.$router.push({ path: \"/address\", query: { isTo: 1 } });\n    }\n  }\n};\n</script>\n<style scoped>\n.mui-scroll {\n  padding: 54px 10px 115px 10px;\n}\n.noAddress {\n  line-height: 60px;\n  font-size: 20px;\n  font-weight: bold;\n}\n.fa-edit {\n  color: rgb(131, 129, 129);\n  font-weight: bold;\n  margin-right: 5px;\n}\n.address {\n  width: 100%;\n  /* height: 80px; */\n  background: #ffffff;\n  padding: 10px 10px 20px 10px;\n  border-radius: 8px;\n  position: relative;\n}\n.address-detail span:first-child {\n  color: rgb(255, 72, 145);\n  display: inline-block;\n  padding-right: 5px;\n  font-size: 30px;\n}\n.receiver {\n  color: rgb(148, 146, 146);\n  font-size: 16px;\n  line-height: 26px;\n}\n.gt {\n  position: absolute;\n  top: 30px;\n  right: 10px;\n  color: rgb(148, 146, 146);\n}\n.tips {\n  color: rgb(255, 72, 145);\n  font-size: 12px;\n}\n.fa-info {\n  color: #fff;\n  display: inline-block;\n  width: 15px;\n  height: 15px;\n  line-height: 15px;\n  text-align: center;\n  background: rgb(255, 72, 145);\n  border-radius: 50%;\n  margin-right: 5px;\n}\n/* content */\n.content {\n  background: #fff;\n  border-radius: 8px;\n  margin-top: 10px;\n  padding: 10px 5px;\n}\n.jsd {\n  color: rgb(255, 72, 145);\n  font-weight: 600;\n  line-height: 30px;\n  padding-left: 10px;\n}\n.goods-list {\n  padding: 8px 5px;\n\n  width: 100%;\n}\n.goods-item {\n  box-shadow: 0 0 4px #ccc;\n  margin-bottom: 10px;\n  padding: 5px;\n  border-radius: 8px;\n  display: flex;\n}\n.goods-item-left img {\n  width: 80px;\n}\n.goods-item-right {\n  width: 100%;\n  padding-left: 5px;\n  line-height: 20px;\n}\n.goods-item-right div:nth-child(2) {\n  font-size: 14px;\n  color: rgb(146, 145, 145);\n}\n.goods-item-right div:nth-child(3) {\n  font-size: 14px;\n}\n.goods-item-right div:nth-child(3) span:first-child {\n  color: rgb(255, 72, 145);\n}\n.goods-item-right div:nth-child(4) {\n  float: right;\n}\n.goods-item-right div:nth-child(4) span {\n  color: rgb(255, 72, 145);\n}\n.pay-message div {\n  line-height: 30px;\n  color: #424141;\n  display: flex;\n  justify-content: space-between;\n}\n.goods-input {\n  border: none;\n  height: 30px;\n  text-align: right;\n  font-size: 14px;\n  color: rgb(163, 156, 156);\n  padding-left: -1px;\n}\n.goods-input::placeholder {\n  font-size: 14px;\n  text-align: right;\n}\n.pay-bottom {\n  border-bottom: 1px solid #ccc;\n  transform: scaleY(0.4);\n}\n.total-money {\n  overflow: hidden;\n  margin-top: 10px;\n}\n.total-money div {\n  float: right;\n}\n.to-pay {\n  width: 100%;\n  box-shadow: 0 0 5px #ccc;\n  height: 60px;\n  background: #fff;\n  position: fixed;\n  bottom: 51px;\n  z-index: 99;\n  left: 0px;\n  padding: 0 15px;\n}\n.to-pay-content {\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.to-pay-content div:first-child {\n  font-size: 12px;\n  color: rgb(146, 145, 145);\n}\n.to-pay-content div:first-child span {\n  font-size: 18px;\n  color: rgb(255, 72, 145);\n}\n.to-pay-content div:last-child {\n  width: 100px;\n  height: 45px;\n  background: rgb(255, 72, 145);\n  border-radius: 10px;\n  text-align: center;\n  line-height: 45px;\n  color: #fff;\n}\n/* content */\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toPay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toPay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./toPay.vue?vue&type=template&id=42e8c94c&scoped=true&\"\nimport script from \"./toPay.vue?vue&type=script&lang=js&\"\nexport * from \"./toPay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./toPay.vue?vue&type=style&index=0&id=42e8c94c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42e8c94c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toPay.vue?vue&type=style&index=0&id=42e8c94c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toPay.vue?vue&type=style&index=0&id=42e8c94c&scoped=true&lang=css&\""],"sourceRoot":""}