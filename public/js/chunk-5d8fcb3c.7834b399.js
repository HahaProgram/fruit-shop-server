(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d8fcb3c"],{5232:function(t,s,e){},b168:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"mui-content"},[e("div",{staticClass:"mui-scroll-wrapper"},[e("div",{staticClass:"mui-scroll"},[e("div",{staticClass:"address",on:{click:t.selectAddress}},[t.address.id?e("div",[e("div",{staticClass:"address-detail"},[e("span",{staticClass:"fa fa-paper-plane-o"}),e("span",[t._v(t._s(t.address.address))])]),e("div",{staticClass:"receiver"},[e("span",[t._v(t._s(t.address.receiver))]),t._v(" "),e("span",[t._v(t._s(t.address.phone))])])]):e("div",{staticClass:"noAddress"},[e("span",{staticClass:"fa fa-edit"}),e("span",[t._v("请填写收货地址")])]),e("div",{staticClass:"gt"},[t._v(">")])]),e("div",{staticClass:"content"},[e("div",{staticClass:"jsd"},[t._v("极速达")]),e("div",{staticClass:"goods-list"},[e("div",t._l(t.buyList,(function(s){return e("div",{key:s.id,staticClass:"goods-item"},[e("div",{staticClass:"goods-item-left"},[e("img",{attrs:{src:s.image,alt:""}})]),e("div",{staticClass:"goods-item-right"},[e("div",[t._v(t._s(s.goodsName))]),e("div",[t._v(t._s(s.goodsDes))]),e("div",[t._v(" 价格: "),e("span",[t._v("¥ "+t._s(s.goodsPrice))]),t._v(" x "),e("span",[t._v(t._s(s.goodsNum))])]),e("div",[t._v(" 小计: "),e("span",[t._v("¥ "+t._s(s.goodsPrice*s.goodsNum))])])])])})),0),e("div",{staticClass:"pay-message"},[e("div",[e("span",[t._v("商品金额")]),e("span",[t._v("¥ "+t._s(t.money))])]),e("div",[e("span",[t._v(" 基础配送费 "),8===t.sendMoney?e("span",{staticClass:"tips"},[e("span",{staticClass:"fa fa-info"}),t._v(" 满88元，免配送费哦 ")]):t._e()]),e("span",[t._v("¥ "+t._s(t.sendMoney))])]),t._m(0)]),e("div",{staticClass:"pay-bottom"}),e("div",{staticClass:"total-money"},[e("div",[t._v(" 小计：¥ "),e("span",[t._v(t._s(t.totalMoney))])])])])])])]),e("div",{staticClass:"to-pay"},[e("div",{staticClass:"to-pay-content"},[e("div",[t._v(" 待支付: "),e("span",[t._v("¥ "+t._s(t.totalMoney))])]),e("div",{on:{click:t.toPay}},[t._v("去支付")])])])])},r=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("span",[t._v("订单备注")]),e("span",[e("input",{staticClass:"goods-input",attrs:{placeholder:"订单备注",type:"text"}})])])}],i=(e("4160"),e("d3b7"),e("159b"),e("96cf"),e("1da1")),o={mounted:function(){this.mui(".mui-scroll-wrapper").scroll({deceleration:5e-4})},created:function(){this.$store.commit("modifyTitle","订单填写")},computed:{buyList:function(){return this.$store.state.buyList},money:function(){var t=0;return this.$store.state.buyList.forEach((function(s){t+=s.goodsPrice*s.goodsNum})),t},sendMoney:function(){var t=0;return this.$store.state.buyList.forEach((function(s){t+=s.goodsPrice*s.goodsNum})),t>88?0:8},totalMoney:function(){var t=0;this.$store.state.buyList.forEach((function(s){t+=s.goodsPrice*s.goodsNum}));var s=0;return s=t>88?0:8,t+s},address:function(){return this.$store.state.selectAddress}},methods:{toPay:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e="",t.mui.prompt("正在支付中···","请输入支付密码","提示",["取消","支付"],function(){var s=Object(i["a"])(regeneratorRuntime.mark((function s(a){var r,i,o,n,c,d;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(0!==a.index){s.next=2;break}return s.abrupt("return");case 2:if(e=a.value,r=t.$store.state.buyList,i=t.$store.state.selectAddress,i.address){s.next=8;break}return t.mui.toast("请选择地址"),s.abrupt("return");case 8:return o=!1,n=function(){return new Promise((function(s,e){r.forEach((function(e){e.goodsNum>e.stock&&!1===o?(t.mui.alert("商品：".concat(e.goodsName," 库存不足")),o=!0,s(!0)):s(!1)}))}))},s.next=12,n();case 12:if(o=s.sent,!o){s.next=15;break}return s.abrupt("return");case 15:return console.log("rrrrrrrrrrrrrr"+o),s.next=18,t.$http.post("addOrder",{goodsList:r,address:i,totalMoney:t.totalMoney,password:e});case 18:c=s.sent,console.log(c.data),t.mui.toast(c.data.msg),0===c.data.code&&(t.$store.commit("modifyBuList",[]),setTimeout((function(){t.$router.push("/orders")}),2e3),d=0,r.forEach((function(t){d+=t.goodsNum})),t.$store.commit("modifyCartNum",t.$store.state.shoppingCartNum-d));case 22:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}(),"div"),document.querySelector(".mui-popup-input input").type="password";case 3:case"end":return s.stop()}}),s)})))()},selectAddress:function(){this.$router.push({path:"/address",query:{isTo:1}})}}},n=o,c=(e("e689"),e("2877")),d=Object(c["a"])(n,a,r,!1,null,"6dab5122",null);s["default"]=d.exports},e689:function(t,s,e){"use strict";var a=e("5232"),r=e.n(a);r.a}}]);
//# sourceMappingURL=chunk-5d8fcb3c.7834b399.js.map